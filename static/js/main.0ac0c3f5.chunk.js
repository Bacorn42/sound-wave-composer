(this["webpackJsonpsound-wave-composer"]=this["webpackJsonpsound-wave-composer"]||[]).push([[0],[,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"sine",(function(){return l})),n.d(a,"square",(function(){return h})),n.d(a,"sawtooth",(function(){return j})),n.d(a,"triangle",(function(){return v}));var c=n(1),r=n.n(c),i=n(8),o=n.n(i),s=(n(15),n(2)),u=n(7),f=n(3),l=(n(16),function(t,e){return Math.sin(2*Math.PI*t*e)}),h=function(t,e){return Math.sign(l(t,e))},j=function(t,e){return 2*(e*t-Math.floor(.5+e*t))},v=function(t,e){return 2*Math.abs(j(t,e))-1},b=(n(17),n(0));var O=function(t){var e=t.setNewNoteLength,n=t.setBeatDivision,r=t.setTempo,i=t.setWaveFunction,o=Object(c.useState)(1),u=Object(s.a)(o,2),f=u[0],l=u[1],h=Object(c.useState)(4),j=Object(s.a)(h,2),v=j[0],O=j[1],g=Object(c.useState)(60),d=Object(s.a)(g,2),p=d[0],y=d[1],x=Object(c.useState)("sine"),w=Object(s.a)(x,2),m=w[0],M=w[1];return Object(b.jsxs)("div",{className:"display-settings",children:["New note length ",Object(b.jsx)("input",{value:f,onChange:function(t){var n=t.target.value;l(n),e(n)}}),"beats.",Object(b.jsx)("br",{}),"Beat division ",Object(b.jsx)("input",{value:v,onChange:function(t){var e=t.target.value;O(e),n(e)}}),".",Object(b.jsx)("br",{}),"Tempo ",Object(b.jsx)("input",{value:p,onChange:function(t){var e=t.target.value;y(e),r(e)}}),"bpm.",Object(b.jsx)("br",{}),"Wave ",Object(b.jsx)("select",{value:m,onChange:function(t){var e=t.target.value;M(e),i(e)},children:Object.keys(a).map((function(t){return Object(b.jsx)("option",{value:t,children:t},t)}))})]})};n(19);for(var g=function(t){var e=t.notes,n=t.draw,a=t.deleteNotes,r=Object(c.useState)(0),i=Object(s.a)(r,2),o=i[0],u=i[1],l=Object(c.useState)(0),h=Object(s.a)(l,2),j=h[0],v=h[1];return Object(c.useEffect)((function(){u(e[0].tuningOffset),v(e[0].getLength())}),[e]),Object(b.jsxs)("div",{className:"note-settings",children:["Tuning offset ",Object(b.jsx)("input",{value:o,onChange:function(t){var a=t.target.value;u(a);var c,r=Object(f.a)(e);try{for(r.s();!(c=r.n()).done;){c.value.setTuningOffset(a)}}catch(i){r.e(i)}finally{r.f()}n()}})," cents.",Object(b.jsx)("br",{}),"Length ",Object(b.jsx)("input",{value:j,onChange:function(t){var a=t.target.value;v(a);var c,r=Object(f.a)(e);try{for(r.s();!(c=r.n()).done;){c.value.setLength(a)}}catch(i){r.e(i)}finally{r.f()}n()}}),"beats.",Object(b.jsx)("br",{}),Object(b.jsx)("button",{onClick:a,children:"Delete"})]})},d=n(9),p=n(10),y=44100,x=8191.75,w=80,m=20,M=440,k=[M,M*Math.pow(2,1/12),M*Math.pow(2,2/12),M*Math.pow(2,.25),M*Math.pow(2,4/12),M*Math.pow(2,5/12),M*Math.pow(2,.5),M*Math.pow(2,7/12),M*Math.pow(2,8/12),M*Math.pow(2,.75),M*Math.pow(2,10/12),M*Math.pow(2,11/12)].reverse(),S=["A4","A\u266f4","B4","C5","C\u266f5","D5","D\u266f5","E5","F5","F\u266f5","G5","G\u266f5"].reverse(),C=function(){function t(e,n,a,c){Object(d.a)(this,t),this.x=e,this.y=n,this.width=w*a,this.height=m,this.tuningOffset=0,this.length=a,this.func=c}return Object(p.a)(t,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y-this.tuningOffset/100*m}},{key:"getOffset",value:function(){return this.x/w}},{key:"getTone",value:function(){return k[this.y/m]*Math.pow(2,this.tuningOffset/1200)}},{key:"getLength",value:function(){return this.length}},{key:"setLength",value:function(t){this.length=t,this.width=w*t}},{key:"setTuningOffset",value:function(t){this.tuningOffset=t}},{key:"inRect",value:function(t,e){return t>=this.getX()&&t<=this.getX()+this.width&&e>=this.getY()&&e<=this.getY()+this.height}}]),t}(),T=["#0c0","#c00","#cc0","#00c"],N=Object.keys(a),L={},R=0;R<T.length;R++)L[N[R]]=T[R];var A=L;var B=function(t){var e=t.notes,n=t.setNotes,a=(t.tempo,t.setTempo),r=Object(c.useRef)(null),i=Object(c.useState)([]),o=Object(s.a)(i,2),l=o[0],h=o[1],j=Object(c.useState)(!1),v=Object(s.a)(j,2),d=v[0],p=v[1],y=Object(c.useState)(1),x=Object(s.a)(y,2),M=x[0],k=x[1],T=Object(c.useState)(4),N=Object(s.a)(T,2),L=N[0],R=N[1],B=Object(c.useState)("sine"),D=Object(s.a)(B,2),F=D[0],W=D[1],X=function(){var t=r.current.getContext("2d");t.clearRect(0,0,r.current.width,r.current.height),t.font="16px sans-serif",t.lineWidth=1,t.strokeStyle="#666";for(var n=1;n<12;n++)t.beginPath(),t.moveTo(0,m*n+.5),t.lineTo(400,m*n+.5),t.stroke();for(var a=1;a<5*L;a++)t.beginPath(),t.moveTo(w/L*a+.5,0),t.lineTo(w/L*a+.5,240),t.stroke();var c,i=Object(f.a)(e);try{for(i.s();!(c=i.n()).done;){var o=c.value;t.fillStyle=A[o.func],t.fillRect(o.getX()+2,o.getY()+2,o.width-3,o.height-3),t.strokeStyle=l.includes(o)?"#900":"#666",t.lineWidth=2,t.strokeRect(o.getX()+2.5,o.getY()+2.5,o.width-4,o.height-4)}}catch(u){i.e(u)}finally{i.f()}t.fillStyle="#000";for(var s=0;s<12;s++)t.fillText(S[s],0,m*(s+1)-4)},Y=function(t){var e=t.target.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}};return Object(c.useEffect)((function(){return X()})),Object(b.jsxs)("div",{className:"display",children:[Object(b.jsx)(O,{setNewNoteLength:function(t){k(t)},setBeatDivision:function(t){R(t)},setTempo:function(t){a(t)},setWaveFunction:function(t){W(t)}}),Object(b.jsxs)("div",{className:"display-canvas",children:[Object(b.jsx)("canvas",{ref:r,width:400,height:240,tabIndex:"0",onClick:function(t){var a,c=Y(t),r=Object(f.a)(e);try{var i=function(){var t=a.value;if(t.inRect(c.x,c.y))return h(d?function(e){return[].concat(Object(u.a)(e),[t])}:[t]),X(),{v:void 0}};for(r.s();!(a=r.n()).done;){var o=i();if("object"===typeof o)return o.v}}catch(j){r.e(j)}finally{r.f()}var s=Math.floor(c.x/(w/L))*(w/L),l=20*Math.floor(c.y/20);n([].concat(Object(u.a)(e),[new C(s,l,M,F)])),h([]),X()},onKeyDown:function(t){"Control"===t.key&&p(!0)},onKeyUp:function(t){"Control"===t.key&&p(!1)}}),Object(b.jsx)("button",{onClick:function(){n([]),h([]),X()},children:"Clear"})]}),l.length>0&&Object(b.jsx)(g,{notes:l,draw:X,deleteNotes:function(){n(e.filter((function(t){return!l.includes(t)}))),h([])}})]})};n(20);var D=function(t,e,n){for(var a=[],c=0;c<y*e;c++){var r=Math.floor(n(t,c/y)*x);a.push(r,r)}return a};function F(t,e){for(var n=new Array(e).fill(0),a=0;a<e;a++){var c=t>>8*a&255;n[a]=c}return n.reverse(),n}function W(t){return t.split("").map((function(t){return t.charCodeAt(0)}))}function X(t,e){var n,a=Object(f.a)(e);try{for(a.s();!(n=a.n()).done;){var c=n.value;t.push(c)}}catch(r){a.e(r)}finally{a.f()}}function Y(t,e){for(var n=e.length-1;n>=0;n--)t.push(e[n])}var E=function(t,e){var n=[];!function(t,e){X(t,W("RIFF")),Y(t,F(36+e,4)),X(t,W("WAVE")),X(t,W("fmt ")),Y(t,F(16,4)),Y(t,F(1,2)),Y(t,F(2,2)),Y(t,F(y,4)),Y(t,F(176400,4)),Y(t,F(4,2)),Y(t,F(16,2)),X(t,W("data")),Y(t,F(e,4))}(n,e),function(t,e){var n,a=Object(f.a)(e);try{for(a.s();!(n=a.n()).done;)Y(t,F(n.value,2))}catch(c){a.e(c)}finally{a.f()}}(n,t);var a=new Uint8Array(n),c=new Blob([a],{type:"application/octet-stream"});return window.URL.createObjectURL(c)};var G=function(t){var e=t.notes,n=t.tempo,r=Object(c.useState)(null),i=Object(s.a)(r,2),o=i[0],u=i[1],l=function(t){var e=t.reduce((function(t,e){return Math.max(t,e)}),0);return e>x?t.map((function(t){return Math.floor(t*(x/e))})):t};return Object(b.jsxs)("div",{className:"generator",children:[Object(b.jsx)("button",{onClick:function(){var t=176400*(5/(n/60));u(0),setTimeout((function(){var c,r=new Array(t).fill(0),i=Object(f.a)(e);try{for(i.s();!(c=i.n()).done;)for(var o=c.value,s=o.getOffset()/(n/60),h=D(o.getTone(),o.getLength()/(n/60),a[o.func]),j=0;j<h.length;j++){r[Math.floor(88200*s)+j]+=h[j]}}catch(b){i.e(b)}finally{i.f()}var v=l(r);u(E(v,t))}),0)},children:"Generate!"}),o?Object(b.jsx)("audio",{src:o,controls:!0}):0===o?Object(b.jsx)("div",{children:"Generating..."}):void 0]})};var I=function(){var t=Object(c.useState)([]),e=Object(s.a)(t,2),n=e[0],a=e[1],r=Object(c.useState)(60),i=Object(s.a)(r,2),o=i[0],u=i[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)(B,{notes:n,setNotes:a,tempo:o,setTempo:u}),Object(b.jsx)(G,{notes:n,tempo:o})]})};n(21);var U=function(){return Object(b.jsx)("div",{className:"app",children:Object(b.jsx)(I,{})})};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(U,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.0ac0c3f5.chunk.js.map