(this["webpackJsonpsound-wave-composer"]=this["webpackJsonpsound-wave-composer"]||[]).push([[0],[,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n.n(r),c=n(6),a=n.n(c),o=(n(13),n(2)),s=n(3),u=(n(14),n(15),n(0));var f=function(t){var e=t.note,n=t.draw,i=t.deleteNote,c=Object(r.useState)(e.tuningOffset),a=Object(s.a)(c,2),o=a[0],f=a[1],l=Object(r.useState)(e.getLength()),h=Object(s.a)(l,2),v=h[0],g=h[1];return Object(r.useEffect)((function(){f(e.tuningOffset),g(e.getLength())}),[e]),Object(u.jsxs)("div",{className:"note-settings",children:["Tuning offset ",Object(u.jsx)("input",{value:o,onChange:function(t){var r=t.target.value;f(r),e.setTuningOffset(r),n()}})," cents.",Object(u.jsx)("br",{}),"Length ",Object(u.jsx)("input",{value:v,onChange:function(t){var r=t.target.value;g(r),e.setLength(r),n()}}),"s.",Object(u.jsx)("br",{}),Object(u.jsx)("button",{onClick:i,children:"Delete"})]})},l=n(7),h=n(8),v=44100,g=882e3,j=8191.75,d=20,b=440,O=[b,b*Math.pow(2,1/12),b*Math.pow(2,2/12),b*Math.pow(2,.25),b*Math.pow(2,4/12),b*Math.pow(2,5/12),b*Math.pow(2,.5),b*Math.pow(2,7/12),b*Math.pow(2,8/12),b*Math.pow(2,.75),b*Math.pow(2,10/12),b*Math.pow(2,11/12)].reverse(),p=["A4","A\u266f4","B4","C5","C\u266f5","D5","D\u266f5","E5","F5","F\u266f5","G5","G\u266f5"].reverse(),y=function(){function t(e,n){Object(l.a)(this,t),this.x=e,this.y=n,this.width=80,this.height=d,this.tuningOffset=0,this.length=1}return Object(h.a)(t,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y-this.tuningOffset/100*d}},{key:"getOffset",value:function(){return this.x/80}},{key:"getTone",value:function(){return O[this.y/d]*Math.pow(2,this.tuningOffset/1200)}},{key:"getLength",value:function(){return this.length}},{key:"setLength",value:function(t){this.length=t,this.width=80*t}},{key:"setTuningOffset",value:function(t){this.tuningOffset=t}},{key:"inRect",value:function(t,e){return t>=this.getX()&&t<=this.getX()+this.width&&e>=this.getY()&&e<=this.getY()+this.height}}]),t}(),x=20;var w=function(t){var e=t.notes,n=Object(r.useRef)(null),i=Object(r.useState)(null),c=Object(s.a)(i,2),a=c[0],l=c[1],h=function(){var t=n.current.getContext("2d");t.clearRect(0,0,n.current.width,n.current.height),t.font="16px sans-serif",t.lineWidth=1,t.strokeStyle="#666";for(var r=1;r<12;r++)t.beginPath(),t.moveTo(0,d*r+.5),t.lineTo(400,d*r+.5),t.stroke();for(var i=1;i<x;i++)t.beginPath(),t.moveTo(x*i+.5,0),t.lineTo(x*i+.5,240),t.stroke();t.fillStyle="#ccc";var c,s=Object(o.a)(e);try{for(s.s();!(c=s.n()).done;){var u=c.value;t.fillRect(u.getX()+2,u.getY()+2,u.width-3,u.height-3),t.strokeStyle=u===a?"#900":"#666",t.lineWidth=2,t.strokeRect(u.getX()+2.5,u.getY()+2.5,u.width-4,u.height-4)}}catch(l){s.e(l)}finally{s.f()}t.fillStyle="#000";for(var f=0;f<12;f++)t.fillText(p[f],0,d*(f+1)-4)},v=function(t){var e=t.target.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}};return Object(r.useEffect)((function(){return h()})),Object(u.jsxs)("div",{className:"display",children:[Object(u.jsxs)("div",{className:"display-canvas",children:[Object(u.jsx)("canvas",{ref:n,width:400,height:240,onClick:function(t){var n,r=v(t),i=Object(o.a)(e);try{for(i.s();!(n=i.n()).done;){var c=n.value;if(c.inRect(r.x,r.y))return l(c),void h()}}catch(u){i.e(u)}finally{i.f()}var a=Math.floor(r.x/x)*x,s=Math.floor(r.y/x)*x;e.push(new y(a,s)),l(null),h()}}),Object(u.jsx)("button",{onClick:function(){e.splice(0,e.length),l(null),h()},children:"Clear"})]}),a&&Object(u.jsx)(f,{note:a,draw:h,deleteNote:function(){var t=e.findIndex((function(t){return t===a}));e.splice(t,1),l(null)}})]})};n(17);function M(t,e){for(var n=[],r=0;r<v*e;r++){var i=Math.floor(Math.sin(2*t*Math.PI*(r/v))*j);n.push(i),n.push(i)}return n}function k(t,e){for(var n=new Array(e).fill(0),r=0;r<e;r++){var i=t>>8*r&255;n[r]=i}return n.reverse(),n}function m(t){return t.split("").map((function(t){return t.charCodeAt(0)}))}function C(t,e){var n,r=Object(o.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.push(i)}}catch(c){r.e(c)}finally{r.f()}}function T(t,e){for(var n=e.length-1;n>=0;n--)t.push(e[n])}var R=function(t){var e=[];!function(t){C(t,m("RIFF")),T(t,k(882036,4)),C(t,m("WAVE")),C(t,m("fmt ")),T(t,k(16,4)),T(t,k(1,2)),T(t,k(2,2)),T(t,k(v,4)),T(t,k(176400,4)),T(t,k(4,2)),T(t,k(16,2)),C(t,m("data")),T(t,k(g,4))}(e),function(t,e){var n,r=Object(o.a)(e);try{for(r.s();!(n=r.n()).done;)T(t,k(n.value,2))}catch(i){r.e(i)}finally{r.f()}}(e,t);var n=new Uint8Array(e),r=new Blob([n],{type:"application/octet-stream"});return window.URL.createObjectURL(r)};var L=function(t){var e=t.notes,n=Object(r.useState)(null),i=Object(s.a)(n,2),c=i[0],a=i[1],f=function(t){var e=t.reduce((function(t,e){return Math.max(t,e)}),0);return e>j?t.map((function(t){return Math.floor(t*(j/e))})):t};return Object(u.jsxs)("div",{className:"generator",children:[Object(u.jsx)("button",{onClick:function(){a(0),setTimeout((function(){var t,n=new Array(g).fill(0),r=Object(o.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,c=i.getOffset(),s=M(i.getTone(),i.getLength());console.log(i.getTone());for(var u=0;u<s.length;u++){n[88200*c+u]+=s[u]}}}catch(h){r.e(h)}finally{r.f()}var l=f(n);console.log(l),a(R(l))}),0)},children:"Generate!"}),c?Object(u.jsx)("audio",{src:c,controls:!0}):0===c?Object(u.jsx)("div",{children:"Generating..."}):void 0]})};var S=function(){var t=[];return Object(u.jsxs)("div",{children:[Object(u.jsx)(w,{notes:t}),Object(u.jsx)(L,{notes:t})]})};n(18);var A=function(){return Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(S,{})})};a.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(A,{})}),document.getElementById("root"))}],[[19,1,2]]]);
//# sourceMappingURL=main.623e9dc6.chunk.js.map