(this["webpackJsonpsound-wave-composer"]=this["webpackJsonpsound-wave-composer"]||[]).push([[0],[,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(8),i=n.n(r),o=(n(15),n(2)),s=n(7),u=n(3),f=(n(16),n(17),n(0));var l=function(t){var e=t.setNewNoteLength,n=t.setBeatDivision,c=t.setTempo,r=Object(a.useState)(1),i=Object(o.a)(r,2),s=i[0],u=i[1],l=Object(a.useState)(4),h=Object(o.a)(l,2),j=h[0],v=h[1],b=Object(a.useState)(60),O=Object(o.a)(b,2),g=O[0],d=O[1];return Object(f.jsxs)("div",{className:"display-settings",children:["New note length ",Object(f.jsx)("input",{value:s,onChange:function(t){var n=t.target.value;u(n),e(n)}}),"beats.",Object(f.jsx)("br",{}),"Beat division ",Object(f.jsx)("input",{value:j,onChange:function(t){var e=t.target.value;v(e),n(e)}}),".",Object(f.jsx)("br",{}),"Tempo ",Object(f.jsx)("input",{value:g,onChange:function(t){var e=t.target.value;d(e),c(e)}}),"bpm."]})};n(19);var h=function(t){var e=t.notes,n=t.draw,c=t.deleteNotes,r=Object(a.useState)(0),i=Object(o.a)(r,2),s=i[0],l=i[1],h=Object(a.useState)(0),j=Object(o.a)(h,2),v=j[0],b=j[1];return Object(a.useEffect)((function(){l(e[0].tuningOffset),b(e[0].getLength())}),[e]),Object(f.jsxs)("div",{className:"note-settings",children:["Tuning offset ",Object(f.jsx)("input",{value:s,onChange:function(t){var a=t.target.value;l(a);var c,r=Object(u.a)(e);try{for(r.s();!(c=r.n()).done;){c.value.setTuningOffset(a)}}catch(i){r.e(i)}finally{r.f()}n()}})," cents.",Object(f.jsx)("br",{}),"Length ",Object(f.jsx)("input",{value:v,onChange:function(t){var a=t.target.value;b(a);var c,r=Object(u.a)(e);try{for(r.s();!(c=r.n()).done;){c.value.setLength(a)}}catch(i){r.e(i)}finally{r.f()}n()}}),"beats.",Object(f.jsx)("br",{}),Object(f.jsx)("button",{onClick:c,children:"Delete"})]})},j=n(9),v=n(10),b=44100,O=8191.75,g=80,d=20,p=440,y=[p,p*Math.pow(2,1/12),p*Math.pow(2,2/12),p*Math.pow(2,.25),p*Math.pow(2,4/12),p*Math.pow(2,5/12),p*Math.pow(2,.5),p*Math.pow(2,7/12),p*Math.pow(2,8/12),p*Math.pow(2,.75),p*Math.pow(2,10/12),p*Math.pow(2,11/12)].reverse(),x=["A4","A\u266f4","B4","C5","C\u266f5","D5","D\u266f5","E5","F5","F\u266f5","G5","G\u266f5"].reverse(),w=function(){function t(e,n,a){Object(j.a)(this,t),this.x=e,this.y=n,this.width=g*a,this.height=d,this.tuningOffset=0,this.length=a}return Object(v.a)(t,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y-this.tuningOffset/100*d}},{key:"getOffset",value:function(){return this.x/g}},{key:"getTone",value:function(){return y[this.y/d]*Math.pow(2,this.tuningOffset/1200)}},{key:"getLength",value:function(){return this.length}},{key:"setLength",value:function(t){this.length=t,this.width=g*t}},{key:"setTuningOffset",value:function(t){this.tuningOffset=t}},{key:"inRect",value:function(t,e){return t>=this.getX()&&t<=this.getX()+this.width&&e>=this.getY()&&e<=this.getY()+this.height}}]),t}();var m=function(t){var e=t.notes,n=t.setNotes,c=(t.tempo,t.setTempo),r=Object(a.useRef)(null),i=Object(a.useState)([]),j=Object(o.a)(i,2),v=j[0],b=j[1],O=Object(a.useState)(!1),p=Object(o.a)(O,2),y=p[0],m=p[1],k=Object(a.useState)(1),M=Object(o.a)(k,2),C=M[0],S=M[1],T=Object(a.useState)(4),N=Object(o.a)(T,2),L=N[0],R=N[1],A=function(){var t=r.current.getContext("2d");t.clearRect(0,0,r.current.width,r.current.height),t.font="16px sans-serif",t.lineWidth=1,t.strokeStyle="#666";for(var n=1;n<12;n++)t.beginPath(),t.moveTo(0,d*n+.5),t.lineTo(400,d*n+.5),t.stroke();for(var a=1;a<5*L;a++)t.beginPath(),t.moveTo(g/L*a+.5,0),t.lineTo(g/L*a+.5,240),t.stroke();t.fillStyle="#ccc";var c,i=Object(u.a)(e);try{for(i.s();!(c=i.n()).done;){var o=c.value;t.fillRect(o.getX()+2,o.getY()+2,o.width-3,o.height-3),t.strokeStyle=v.includes(o)?"#900":"#666",t.lineWidth=2,t.strokeRect(o.getX()+2.5,o.getY()+2.5,o.width-4,o.height-4)}}catch(f){i.e(f)}finally{i.f()}t.fillStyle="#000";for(var s=0;s<12;s++)t.fillText(x[s],0,d*(s+1)-4)},B=function(t){var e=t.target.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}};return Object(a.useEffect)((function(){return A()})),Object(f.jsxs)("div",{className:"display",children:[Object(f.jsx)(l,{setNewNoteLength:function(t){S(t)},setBeatDivision:function(t){R(t)},setTempo:function(t){c(t)}}),Object(f.jsxs)("div",{className:"display-canvas",children:[Object(f.jsx)("canvas",{ref:r,width:400,height:240,tabIndex:"0",onClick:function(t){var a,c=B(t),r=Object(u.a)(e);try{var i=function(){var t=a.value;if(t.inRect(c.x,c.y))return b(y?function(e){return[].concat(Object(s.a)(e),[t])}:[t]),A(),{v:void 0}};for(r.s();!(a=r.n()).done;){var o=i();if("object"===typeof o)return o.v}}catch(h){r.e(h)}finally{r.f()}var f=Math.floor(c.x/(g/L))*(g/L),l=20*Math.floor(c.y/20);n([].concat(Object(s.a)(e),[new w(f,l,C)])),b([]),A()},onKeyDown:function(t){"Control"===t.key&&m(!0)},onKeyUp:function(t){"Control"===t.key&&m(!1)}}),Object(f.jsx)("button",{onClick:function(){n([]),b([]),A()},children:"Clear"})]}),v.length>0&&Object(f.jsx)(h,{notes:v,draw:A,deleteNotes:function(){n(e.filter((function(t){return v.includes(t)}))),b([])}})]})};n(20);function k(t,e){for(var n=[],a=0;a<b*e;a++){var c=Math.floor(Math.sin(2*t*Math.PI*(a/b))*O);n.push(c),n.push(c)}return n}function M(t,e){for(var n=new Array(e).fill(0),a=0;a<e;a++){var c=t>>8*a&255;n[a]=c}return n.reverse(),n}function C(t){return t.split("").map((function(t){return t.charCodeAt(0)}))}function S(t,e){var n,a=Object(u.a)(e);try{for(a.s();!(n=a.n()).done;){var c=n.value;t.push(c)}}catch(r){a.e(r)}finally{a.f()}}function T(t,e){for(var n=e.length-1;n>=0;n--)t.push(e[n])}var N=function(t,e){var n=[];!function(t,e){S(t,C("RIFF")),T(t,M(36+e,4)),S(t,C("WAVE")),S(t,C("fmt ")),T(t,M(16,4)),T(t,M(1,2)),T(t,M(2,2)),T(t,M(b,4)),T(t,M(176400,4)),T(t,M(4,2)),T(t,M(16,2)),S(t,C("data")),T(t,M(e,4))}(n,e),function(t,e){var n,a=Object(u.a)(e);try{for(a.s();!(n=a.n()).done;)T(t,M(n.value,2))}catch(c){a.e(c)}finally{a.f()}}(n,t);var a=new Uint8Array(n),c=new Blob([a],{type:"application/octet-stream"});return window.URL.createObjectURL(c)};var L=function(t){var e=t.notes,n=t.tempo,c=Object(a.useState)(null),r=Object(o.a)(c,2),i=r[0],s=r[1],l=function(t){var e=t.reduce((function(t,e){return Math.max(t,e)}),0);return e>O?t.map((function(t){return Math.floor(t*(O/e))})):t};return Object(f.jsxs)("div",{className:"generator",children:[Object(f.jsx)("button",{onClick:function(){var t=176400*(5/(n/60));s(0),setTimeout((function(){var a,c=new Array(t).fill(0),r=Object(u.a)(e);try{for(r.s();!(a=r.n()).done;)for(var i=a.value,o=i.getOffset()/(n/60),f=k(i.getTone(),i.getLength()/(n/60)),h=0;h<f.length;h++){c[Math.floor(88200*o)+h]+=f[h]}}catch(v){r.e(v)}finally{r.f()}var j=l(c);s(N(j,t))}),0)},children:"Generate!"}),i?Object(f.jsx)("audio",{src:i,controls:!0}):0===i?Object(f.jsx)("div",{children:"Generating..."}):void 0]})};var R=function(){var t=Object(a.useState)([]),e=Object(o.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)(60),i=Object(o.a)(r,2),s=i[0],u=i[1];return Object(f.jsxs)("div",{children:[Object(f.jsx)(m,{notes:n,setNotes:c,tempo:s,setTempo:u}),Object(f.jsx)(L,{notes:n,tempo:s})]})};n(21);var A=function(){return Object(f.jsx)("div",{className:"app",children:Object(f.jsx)(R,{})})};i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(A,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.4352229f.chunk.js.map